import"./main-B3jpmAP_.js";const u="68651cebe0326dadf201e10763812be2";class p{async getCurrentWeather(e){const{params:n}=e,a=new URL("https://api.openweathermap.org/data/2.5/weather");Object.entries({...n,appid:u}).forEach(([c,l])=>{a.searchParams.append(c,l.toString())});const o=await(await fetch(a)).json();return{city:o.name,temperature:o.main.temp,humidity:o.main.humidity,maxTemp:o.main.temp_max,minTemp:o.main.temp_min,weatherDescription:o.weather[0].description,iconUrl:`https://openweathermap.org/img/wn/${o.weather[0].icon}@2x.png`}}}const m=new p,i={Seoul:{lat:37.5665,lon:126.978,nameKo:"서울"},Incheon:{lat:37.4563,lon:126.7052,nameKo:"인천"},Daejeon:{lat:36.3504,lon:127.3845,nameKo:"대전"},Busan:{lat:35.1796,lon:129.0756,nameKo:"부산"},Daegu:{lat:35.8722,lon:128.6025,nameKo:"대구"},Ulsan:{lat:35.5384,lon:129.3114,nameKo:"울산"}},s={lat:i.Seoul.lat,lon:i.Seoul.lon},h=()=>new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(n=>{s.lat=n.coords.latitude,s.lon=n.coords.longitude,t(n.coords)},n=>e(n))}),w=t=>{const e=document.querySelector(".city-title"),n=document.querySelector(".weather-num"),a=document.querySelector(".weather-des"),r=document.querySelector(".current-weather img"),o=document.querySelector(".current-weather-list");e.textContent=t.city,n.innerHTML=`${Math.round(t.temperature-273.15)}&deg;`,a.textContent=t.weatherDescription,r.src=t.iconUrl,r.style.filter="invert(42%) sepia(100%) saturate(1000%) hue-rotate(180deg) brightness(100%) contrast(100%)",o.innerHTML=`
      <li><i class="fa-solid fa-droplet"></i>${t.humidity}&#37;</li>
      <li><i class="fa-solid fa-temperature-arrow-up"></i>${Math.round(t.maxTemp-273.15)}&deg;</li>
      <li><i class="fa-solid fa-temperature-arrow-down"></i>${Math.round(t.minTemp-273.15)}&deg;</li>
  `},y=(t,e)=>{const n=document.getElementById("region-weather-list"),a=i[t],r=document.createElement("li");r.innerHTML=`
    <a>${a.nameKo}
      <span>${Math.round(e.temperature-273.15)}&deg;
      <img src="${e.iconUrl}"/></span>
    </a>
  `,r.addEventListener("click",o=>{o.preventDefault(),g(t,e),document.querySelector(".region-weather-content").scrollIntoView({behavior:"smooth",block:"end"})}),n.appendChild(r)},g=(t,e)=>{const n=document.querySelector(".region-title"),a=document.querySelector(".region-num"),r=document.querySelector(".region-weather-list").querySelectorAll("li")[0],o=document.querySelector(".region-weather-list").querySelectorAll("li")[1],c=document.querySelector(".region-weather-list").querySelectorAll("li")[2],l=document.querySelector(".region-weather-content img"),d=i[t];n.textContent=d.nameKo,a.innerHTML=`${Math.round(e.temperature-273.15)}&deg;`,r.innerHTML=`<i class="fa-solid fa-droplet"></i>${e.humidity}&#37;`,o.innerHTML=`<i class="fa-solid fa-temperature-arrow-up"></i>${Math.round(e.maxTemp-273.15)}&deg;`,c.innerHTML=`<i class="fa-solid fa-temperature-arrow-down"></i>${Math.round(e.minTemp-273.15)}&deg;`,l.src=e.iconUrl},$=async()=>{try{for(const e in i){const{lat:n,lon:a}=i[e],r=await m.getCurrentWeather({params:{lat:n,lon:a}});y(e,r)}try{await h()}catch{}const t=await m.getCurrentWeather({params:{lat:s.lat,lon:s.lon,lang:"kr"}});w(t)}catch{}};document.addEventListener("DOMContentLoaded",$);export{i as c,s,h as u,m as w};
